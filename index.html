<!DOCTYPE html>
<html lang="cn">
<head>
        <meta charset="utf-8" />
        <title>day one</title>
        <link rel="stylesheet" href="/theme/css/main.css" />

        <!--[if IE]>
            <script src="https://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">day one </a></h1>
                <nav><ul>
                    <li><a href="/category/ji-qi-xue-xi.html">机器学习</a></li>
                    <li><a href="/category/ji-zhu.html">技术</a></li>
                    <li><a href="/category/sheng-huo.html">生活</a></li>
                    <li><a href="/category/tech.html">tech</a></li>
                </ul></nav>
        </header><!-- /#banner -->

            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href="/stock-prediction.html">Stock Prediction</a></h1>
<footer class="post-info">
        <abbr class="published" title="2015-06-10T00:00:00+08:00">
                Published: 三 10 六月 2015
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/haoyuan-hu.html">haoyuan hu</a>
        </address>
<p>In <a href="/category/tech.html">tech</a>.</p>

</footer><!-- /.post-info --><h1>Stock Prediction</h1>
<h2>Using Machine Learning And Bigdata</h2>
<h1>Outline</h1>
<ul>
<li>Pair Trade</li>
<li>涨幅预测</li>
<li>股指预测</li>
</ul>
<h1>Pair Trade</h1>
<ul>
<li>define : 在价值规律的前提下，寻找价值相背离的一对股票， 做对冲操作。</li>
<li>key Point : Pair distance的准确性。</li>
</ul>
<h1>Statistical Pair Trade</h1>
<ul>
<li>采用推荐中的协同过滤公式, 计算整个市场每一只股票的相似度</li>
<li>寻找相似股票中， 近期价值偏离的一对pair</li>
<li>进行对冲操作</li>
<li>Problem:难以确认最合适的相似度公式</li>
</ul>
<h1>Machine Learning Pair Trade</h1>
<ul>
<li>将所有的相似度公式作为一个feature</li>
<li>利用第二天的偏离作为label</li>
<li>直接learn出各个相似度公式的权重</li>
</ul>
<h1>Machine Learning 涨幅预测</h1>
<ul>
<li>data source : 股票市场数据，微博、雪球等ugc数据，资讯数据，电商数据</li>
<li>Feature Engineering: 领域知识特征, n-gram、nn等feature Engineering</li>
<li>algorithm : MART, Learning To Rank, FTRL, BOPR </li>
</ul>
<h1>Data Source</h1>
<ul>
<li>原生金融相关数据，包括上市公司的表现， 股票本身的表现</li>
<li>金融资讯：来源于资讯数据的抓取， 关键词分析</li>
<li>网民的上网数据： 关键词分析</li>
<li>标志性的电商数据: 行业表现</li>
</ul>
<p>依托于odps， 我们可以轻松的存储使用这部分全量数据。</p>
<h1>Feature Engineering</h1>
<ul>
<li>领域知识的feature构建, 有明确的金融含义的特征</li>
<li>n-gram、word2vec : Feature generation  </li>
<li>nn : 利用多层nn寻找隐藏的factor</li>
<li>Tree Feature Transformation</li>
</ul>
<h1>Regression Or Ranking</h1>
<ul>
<li>准确的预测绝对值， 大部分情况下正确率是比较低的</li>
<li>Ranking问题的可预测性则高一点</li>
<li>"我不知道哪只股票会涨， 但我知道哪只股票涨的比别的多"</li>
<li>利用learning To Rank对股票进行ranking</li>
</ul>
<h1>Method</h1>
<ul>
<li>learning To Rank : 将两只股票的delta作为loss Function</li>
<li>绝对值binary化: 涨幅10%等价于10个positive</li>
<li>loss:
    $$min \frac{1}{2}||w||^{2}+C\sum\xi <em s="s">{s}$$
     $$ s.t. w^{T}(x</em>^{+}-x_{s}^{-})\geq 1-\xi _{s} $$</li>
</ul>
<h1>Frame</h1>
<p><img alt="整体架构" src="../images/stock.png" /></p>                </article>
            </aside><!-- /#featured -->
                <section id="content" class="body">
                    <h1>Other articles</h1>
                    <hr />
                    <ol id="posts-list" class="hfeed">

            <li><article class="hentry">
                <header>
                    <h1><a href="/vowpal-wabbit.html" rel="bookmark"
                           title="Permalink to Vowpal Wabbit">Vowpal Wabbit</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2015-03-30T16:00:00+08:00">
                Published: 一 30 三月 2015
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/haoyuan-hu.html">haoyuan hu</a>
        </address>
<p>In <a href="/category/ji-qi-xue-xi.html">机器学习</a>.</p>
<p>tags: <a href="/tag/vw.html">vw</a> <a href="/tag/kaggle.html">kaggle</a> </p>
</footer><!-- /.post-info -->                <h2>简介</h2>
<p>为了避免空洞的语法说明， 以kaggle预测餐厅收入的事例说明。</p>
<h2>数据格式</h2>
<p>数据格式有namespace的概念， 不同namespace之间会做n-gram的feature engineing。</p>
<p>数据表示都是kv格式，所以需要做一下转换。</p>
<p>回归数据格式:</p>
<div class="highlight"><pre>5653753.0 <span class="p">|</span> <span class="nv">OpenDate</span><span class="o">=</span><span class="m">07171999</span> <span class="nv">City</span><span class="o">=</span>İstanbul <span class="nv">CityGroup</span><span class="o">=</span>Big Cities <span class="nv">Type</span><span class="o">=</span>IL <span class="p">|</span>P1:4 P2:5.0 P3:4.0 P4:4.0 P5:2 P6:2 P7:5 P8:4 P9:5 P10:5 P11:3 P12:5 P13:5 ...</pre></div>
                <a class="readmore" href="/vowpal-wabbit.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/theano.html" rel="bookmark"
                           title="Permalink to theano">theano</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2015-03-26T00:00:00+08:00">
                Published: 四 26 三月 2015
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/haoyuan-hu.html">haoyuan hu</a>
        </address>
<p>In <a href="/category/ji-qi-xue-xi.html">机器学习</a>.</p>

</footer><!-- /.post-info -->                <h1>溢美之词</h1>
<p>如果说numpy相对于matlab， sympy相对于mathematic的话， theano就是相当于集合了两者的优点。（有点吹牛了）</p>
<p>在float32情况下， 和cpu相比140倍的提速。</p>
<h1>说明</h1>
<p>theano不算是编程语言， 毕竟都是在python下编写的， 但是又需要 ：</p>
<ul>
<li>定义类型</li>
<li>建立表达式</li>
<li>编译</li>
</ul>
<h1>文档</h1>
<p>业界良心的nbview来了：</p>
<p><a href="http://nbviewer.ipython.org/github/craffel/theano-tutorial/blob/master/Theano%20Tutorial.ipynb">theano文档</a></p>
                <a class="readmore" href="/theano.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/kagglebi-sai-xuan-shou-zong-jie.html" rel="bookmark"
                           title="Permalink to kaggle比赛选手总结">kaggle比赛选手总结</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2015-03-23T00:00:00+08:00">
                Published: 一 23 三月 2015
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/haoyuan-hu.html">haoyuan hu</a>
        </address>
<p>In <a href="/category/ji-qi-xue-xi.html">机器学习</a>.</p>

</footer><!-- /.post-info -->                <h1>背景</h1>
<p>业务角度出发思考的feature到了一定的瓶颈， 目前多种模型的尝试，包括mart, bilinear在内虽然取得了提升， 但是没有取得突破性的进展。</p>
<h1>目的</h1>
<p>寻找可以在偏好优化中使用的手段、方法、技巧。</p>
<h1>outliner</h1>
<ul>
<li>dropout, 数据丢弃</li>
<li>weight decay， 权重衰减</li>
<li>data augmentation, 数据扩大</li>
<li>pre-training</li>
<li>pseudo labeling</li>
<li>parameter sharing </li>
<li>rooling feature map </li>
<li>root mean square pooling</li>
<li>relus</li>
<li>multiscale</li>
<li>convolution</li>
<li>sgd</li>
<li>nesteror momentum</li>
<li>convergence</li>
<li>bagging</li>
</ul>
<h1>相关环境</h1>
<ul>
<li>python</li>
<li>numpy</li>
<li>theano</li>
<li>cuDNN:mac不支持</li>
<li>pyCUDA</li>
<li>lasagne</li>
<li>oxfordnet</li>
<li>ghalton</li>
</ul>
                <a class="readmore" href="/kagglebi-sai-xuan-shou-zong-jie.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/admm.html" rel="bookmark"
                           title="Permalink to ADMM">ADMM</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2015-03-07T00:00:00+08:00">
                Published: 六 07 三月 2015
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/haoyuan-hu.html">haoyuan hu</a>
        </address>
<p>In <a href="/category/tech.html">tech</a>.</p>

</footer><!-- /.post-info -->                <p><a href="http://joegaotao.github.io/cn/2014/02/admm/" title="Permalink to 分布式计算、统计学习与ADMM算法 | 统计边，生活处">Source</a></p>
<h1>分布式计算、统计学习与ADMM算法 | 统计边，生活处</h1>
<p>在整理旧电脑时，才发现13年下半年电脑里有不少残文。老师说，东西搁下了再拿起来花费的时间和之前可能差不多。我一眼看过去这篇关于分布式计算的文章，貌似还真的没有了当时理解的深度和感觉。当时还想利用ADMM算法，把统计中常见的带惩罚的高维问题在此框架下用R重写一下，但是中途多种事情一耽搁，就早已抛之脑后。看来任何事情，真的还是需要坚持，哪怕拨点时间都是好的。先把一篇残文扔出来祭奠下过去的13年吧。公式多文字长，慎入！</p>
<hr />
<p>业界一直在谈论大数据，对于统计而言，大数据其实意味着要不是样本量增加$n rightarrow infty$，要不就是维度的增加$p rightarrow infty$，亦或者两者同时增加，并且维度与样本量的增长速度呈线性或者指数型增长。在稀疏性的假设条件下，再加上一些正则性方法，统计学家可以证明各种加penalty的模型所给出的参数估计具有良好的统计性质，收敛速度也有保证，同时还会给出一些比较好的迭代算法，但是，他们并没有考虑真实环境下的所消耗的计算时间。虽然统计学家也希望尽量寻求迭代数目比较少的算法（比如one-step估计），但是面对真实的Gb级别以上的数据，很多时候我们还是无法直接用这些算法，原因是一般的硬件都无法支撑直接对所有数据进行运算的要求。如果想减少抽样误差，不想抽样，又想提高估计的精度，那么还是需要寻求其他思路，结合已有的模型思想来解决这些问题 ...</p>
                <a class="readmore" href="/admm.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/.html" rel="bookmark"
                           title="Permalink to "><The Weather Man></a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2015-02-22T00:00:00+08:00">
                Published: 日 22 二月 2015
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/haoyuan-hu.html">haoyuan hu</a>
        </address>
<p>In <a href="/category/sheng-huo.html">生活</a>.</p>

</footer><!-- /.post-info -->                <h1>The Weather Man</h1>
<h2>subtitle</h2>
<blockquote>
<p>The world is a fine plane, and worth fighting for. I agree with the second part.</p>
</blockquote>
<h2>Who : main actiors</h2>
<ul>
<li>The Weather man : Nicolas Cage</li>
<li>His father : Michael Caine</li>
</ul>
<h2>What : main plot</h2>
<ul>
<li>天气预报员过着表面上的中产生活， 24万美元的年薪， 沃尔沃的S80.</li>
<li>和妻子离婚， 儿子被恋童癖骚扰， 女儿因为肥胖被嘲笑， 人们因为他预测的天气向他发怒， 父亲患上癌症</li>
<li>此时， 纽约有着一份100w美元年薪的工作等着他。</li>
</ul>
<h2>Key moment</h2>
<p>Cage坐在Caine的车上， 音乐响起《like ...</p>
                <a class="readmore" href="/.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/zhong-fan-20sui.html" rel="bookmark"
                           title="Permalink to 重返20岁">重返20岁</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2015-02-22T00:00:00+08:00">
                Published: 日 22 二月 2015
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/haoyuan-hu.html">haoyuan hu</a>
        </address>
<p>In <a href="/category/sheng-huo.html">生活</a>.</p>

</footer><!-- /.post-info -->                <h1>重返20岁</h1>
<h2>subtitle</h2>
<blockquote>
<p>东野圭吾&lt;秘密&gt;的童话版本，对称的幸福生活下去 </p>
</blockquote>
<h2>Who : main actiors</h2>
<ul>
<li>孟丽君:杨子珊, 年轻化版的沈梦君</li>
<li>李大海:王德顺, 帅气的老潮人, 沈梦君的爱慕者</li>
</ul>
<h2>What : main plot</h2>
<ul>
<li>被家庭琐事窒息的沈梦君， 获得了20岁的容颜</li>
<li>成为受欢迎的歌手， 获得爱情</li>
<li>为救孙子， 重新成为老人</li>
</ul>
<h2>Key moment</h2>
<ul>
<li>音乐节, 杨子珊唱《偿还》</li>
</ul>
<h2>Key words</h2>
<ul>
<li>其实光一直都在， 我们只是需要一点时间来适应黑暗</li>
</ul>
<h2>Key Image</h2>
<p><img alt="带着曾经的女神" src="../images/movie_20_old.jpg" /></p>
<h2>Key Image</h2>
<p><img alt="带着年轻的女神" src="../images/movie_20_young.jpg" /></p>
<h2>Key Image</h2>
<p><img alt="秘密" src="../images/movie_20_secret.jpg" /></p>
<h2>Notes</h2>
<p>相对于《秘密》那种压抑窒息的返老还童， 我们还是更喜欢看一个童话。</p>
<p>青春如果无悔， 那该多无趣啊。</p>
<h2>End</h2>
<p>重要的不是我拥有你， 而是拥有和你在一起的回忆。</p>
                <a class="readmore" href="/zhong-fan-20sui.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/macxia-li-yong-pandocmarkdownlai-xie-slide.html" rel="bookmark"
                           title="Permalink to MAC下利用pandoc+markdown来写slide">MAC下利用pandoc+markdown来写slide</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2015-01-16T00:00:00+08:00">
                Published: 五 16 一月 2015
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/haoyuan-hu.html">haoyuan hu</a>
        </address>
<p>In <a href="/category/ji-zhu.html">技术</a>.</p>

</footer><!-- /.post-info -->                <h1>Mac下用markdown+markdown写slide</h1>
<h2>WHY</h2>
<p>写一份markdown文件， 根据需要可以生成:</p>
<ul>
<li>slide pdf</li>
<li>document pdf</li>
<li>slide html</li>
</ul>
<h2>安装</h2>
<div class="highlight"><pre>brew install pandoc
</pre></div>


<h2>源码</h2>
<div class="highlight"><pre># today

## morning
- I want to have breakfast

## afternoon
- I want to have lunch
</pre></div>


<h2>PDF</h2>
<div class="highlight"><pre>pandoc -D latex &gt; mytemplate.tex
</pre></div>


<div class="highlight"><pre>pandoc test.md -o test.pdf -t beamer 
--latex-engine<span class="o">=</span>xelatex 
--template<span class="o">=</span>mytemplate.tex
</pre></div>


<p>直接执行是不成功的。</p>
<h2>增加中文字体配置 ...</h2>
                <a class="readmore" href="/macxia-li-yong-pandocmarkdownlai-xie-slide.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/pair-tradeshi-jian.html" rel="bookmark"
                           title="Permalink to pair trade事件">pair trade事件</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2014-12-01T00:00:00+08:00">
                Published: 一 01 十二月 2014
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/haoyuan-hu.html">haoyuan hu</a>
        </address>
<p>In <a href="/category/ji-qi-xue-xi.html">机器学习</a>.</p>

</footer><!-- /.post-info -->                <h1>pair trade</h1>
<p>上周五的时候， 平安银行涨停， 平安银行的id是000001， 相似股票的输出如下：</p>
<p><img alt="" src="http://orange-tree.oss-cn-hangzhou.aliyuncs.com/blog-images/stock/IMG_0446%202.PNG" /></p>
<p>从分布上看， 有两只相似股票涨停， 说明这个置信度是可靠的， 这种情况下， 相应的美的和广发就属于被低估了。</p>
<p>上周有人问这个是什么意思，就大概解释了一下：</p>
<p><img alt="" src="http://orange-tree.oss-cn-hangzhou.aliyuncs.com/blog-images/stock/IMG_0448.JPG" /></p>
<p>今天的表现展现了教科书一般的精准， 高估的价值下跌， 低估的价值上涨：</p>
<p><img alt="" src="http://orange-tree.oss-cn-hangzhou.aliyuncs.com/blog-images/stock/IMG_0453.PNG" /></p>
                <a class="readmore" href="/pair-tradeshi-jian.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/python-he-matlab.html" rel="bookmark"
                           title="Permalink to python 和 matlab">python 和 matlab</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2014-11-21T09:00:00+08:00">
                Published: 五 21 十一月 2014
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/haoyuan-hu.html">haoyuan hu</a>
        </address>
<p>In <a href="/category/ji-qi-xue-xi.html">机器学习</a>.</p>
<p>tags: <a href="/tag/python.html">python</a> <a href="/tag/matlab.html">matlab</a> </p>
</footer><!-- /.post-info -->                <h1>线形代数</h1>
<blockquote>
<p>线形代数（linear algebra）是数学的一个分支，研究矩阵理论、向量空间、线性变换和有限维线形方程组等内容。</p>
</blockquote>
<h2>主要思想</h2>
<ol>
<li>线性代数的核心内容是研究有限维线性空间的结构和线性空间的线性变换</li>
<li>向量的线性相关性是研究线性空间结构与线性变换理论的基础</li>
<li>矩阵是有限维线性空间的线性变换的表示形式</li>
<li>线性方程组的求解问题是n维空间到m维空间线性映射求核和全体原象的问题</li>
<li>行列式是研究这些问题的一个工具。</li>
</ol>
<h2>主要内容</h2>
<ol>
<li>矩阵运算：加减乘除、转置、逆矩阵、行列式、矩阵的幂、伴随矩阵</li>
<li>矩阵分块、秩、迹</li>
<li>解方程</li>
<li>线性相关</li>
<li>向量空间</li>
<li>特征值和特征向量</li>
<li>对称、相似</li>
<li>二次标准型</li>
<li>线性空间和基变换</li>
<li>正交空间</li>
<li>矩阵对角化</li>
<li>矩阵分解</li>
<li>重要数字特征。</li>
</ol>
<h1>MATLAB的处理</h1>
<h2>建立矩阵</h2>
<p>MATLAB中，矩阵是默认的数据类型。它把向量看做1×N或者N×1的矩阵。</p>
<p>建立了一个行向量，不同元素之间使用空格或者逗号分开都是可以的。</p>
<div class="highlight"><pre><span class="n">A</span><span class="p">=[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3 ...</span></pre></div>
                <a class="readmore" href="/python-he-matlab.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>
                </ol><!-- /#posts-list -->
<p class="paginator">
    Page 1 / 3
        <a href="/index2.html">&raquo;</a>
</p>
                </section><!-- /#content -->
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>blogroll</h2>
                        <ul>
                            <li><a href="http://getpelican.com/">Pelican</a></li>
                            <li><a href="http://python.org/">Python.org</a></li>
                            <li><a href="http://jinja.pocoo.org/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>